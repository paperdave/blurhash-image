{let e,t=12,a=255,l=.055,s=1+l,{max:r,min:n,PI:i,cos:c,round:m,sign:o}=Math,d=e=>[...e].reduce(((e,t)=>83*e+"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~".indexOf(t)),0);class h extends HTMLElement{connectedCallback(){let h=this.getAttribute("blurhash"),u=document.createElement("canvas"),b=u.getContext("2d"),g=d(h[0]),f=1+(g/9|0),p=g%9+1,x=(d(h[1])+1)/166,C=[],k=new Uint8Array(256),y=0,A=b.createImageData(8,8);u.width=u.height=8;for(let r=0;r<p*f;r++)C[r]=r?(e=d(h.slice(4+2*r,6+2*r)),[e/361|0,(e/19|0)%19,e%19].map((e=>(e-9)/9)).map((e=>o(e)*e**2*x))):(e=d(h.slice(2,6)),[e>>16,e>>8&a,e&a].map((r=>(e=r/a,e<=.4?e/t:((e+l)/s)**2.4)))),C[r][3]=1;for(let o=0;o<8;o++)for(let d=0;d<8;d++){e=[0,0,0,1];for(let t=0;t<f;t++)for(let a=0;a<p;a++){let l=c(i*d*a/8)*c(i*o*t/8);e=e.map(((e,s)=>e+C[a+t*p][s]*l))}e.map((i=>k[y++]=(e=r(0,n(1,i)),m((e<=1/319?e*t:s*e**.41-l)*a+.5))))}A.data.set(k),b.putImageData(A,0,0),this.style.background=`url("${u.toDataURL()}")0 0/100%`}attributeChangedCallback(e,t,a){a||(this[e]=t)}}h.observedAttributes=["style"],customElements.define("blurhash-image",h)}